<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>VetApp | Listado de Pacientes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-slate-50 min-h-screen flex flex-col items-center p-6">

<nav class="max-w-6xl w-full bg-white/80 backdrop-blur-md sticky top-6 z-50 border border-slate-100 shadow-lg rounded-3xl px-6 py-3 mb-10">
    <div class="flex justify-between items-center">
        <div class="flex items-center gap-2">
            <div class="bg-blue-600 p-2 rounded-xl shadow-md">
                <i class="fas fa-paw text-white text-sm"></i>
            </div>
            <span class="text-slate-800 font-bold tracking-tighter uppercase text-sm">VET-Friendly</span>
        </div>

        <div class="hidden md:flex items-center gap-1">
            <a th:href="@{/}" class="px-4 py-2 text-slate-500 hover:text-blue-600 hover:bg-slate-50 rounded-xl text-xs font-bold uppercase tracking-widest transition-all">
                Inicio
            </a>
            <a th:href="@{/formularioUsuario}" class="px-4 py-2 text-slate-500 hover:text-blue-600 hover:bg-slate-50 rounded-xl text-xs font-bold uppercase tracking-widest transition-all">
                Usuarios
            </a>
            <a th:href="@{/formularioMascota}" class="px-4 py-2 text-slate-500 hover:text-blue-600 hover:bg-slate-50 rounded-xl text-xs font-bold uppercase tracking-widest transition-all">
                Mascotas
            </a>
            <a th:href="@{/mascotas}" class="ml-2 px-5 py-2 bg-blue-600 text-white rounded-xl text-xs font-bold uppercase tracking-widest shadow-md">
                Pacientes
            </a>
        </div>
    </div>
</nav>

<div class="max-w-6xl w-full bg-white shadow-2xl rounded-[3rem] border border-slate-100 flex flex-col overflow-hidden">

    <div class="p-8 md:p-12">
        <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 border-b border-slate-50 pb-8">
            <div>
                <h1 class="text-3xl font-extralight tracking-widest text-slate-800 uppercase">Listado de Pacientes</h1>
                <p class="text-slate-400 text-[10px] tracking-[0.3em] uppercase mt-1">Gestión de mascotas registradas</p>
            </div>
            <a th:href="@{/formularioMascota}" class="inline-flex items-center px-6 py-3 bg-slate-800 text-white rounded-2xl hover:bg-slate-900 transition-all text-xs font-bold uppercase tracking-widest shadow-lg">
                <i class="fas fa-plus mr-2"></i> Añadir Mascota
            </a>
        </div>

        <div class="bg-slate-50 p-4 rounded-3xl mb-8">
            <form th:action="@{/mascotas}" method="get" class="flex gap-3">
                <div class="relative flex-grow">
                    <i class="fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"></i>
                    <input type="text" name="buscarMascota" th:value="${buscarMascota}"
                           placeholder="Buscar paciente por nombre..."
                           class="w-full pl-12 pr-6 py-3 bg-white border border-slate-200 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all text-slate-700 text-sm">
                </div>
                <button type="submit" class="px-8 py-3 bg-blue-600 text-white rounded-2xl hover:bg-blue-700 transition-all font-bold uppercase text-xs tracking-widest shadow-lg shadow-blue-100">
                    Filtrar
                </button>
            </form>
        </div>

        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                <tr class="border-b border-slate-100">
                    <th class="px-6 py-4 text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]">ID</th>
                    <th class="px-6 py-4 text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]">Paciente</th>
                    <th class="px-6 py-4 text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]">Especie</th>
                    <th class="px-6 py-4 text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]">Edad</th>
                    <th class="px-6 py-4 text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]">Propietario</th>
                    <th class="px-6 py-4 text-[10px] font-black text-slate-300 uppercase tracking-[0.2em] text-center">Acciones</th>
                </tr>
                </thead>
                <tbody class="divide-y divide-slate-50">
                <tr th:each="m : ${mascotas}" class="hover:bg-slate-50/50 transition-colors group">
                    <td class="px-6 py-5 text-xs text-slate-400 font-mono" th:text="${m.id}"></td>

                    <td class="px-6 py-5">
                        <p class="text-sm font-bold text-slate-700 group-hover:text-blue-600 transition-all" th:text="${m.nombre}"></p>
                    </td>

                    <td class="px-6 py-5">
                        <div class="inline-block px-3 py-1 bg-blue-50 text-blue-600 rounded-lg text-[10px] font-black uppercase tracking-tighter" th:text="${m.especie}"></div>
                    </td>

                    <td class="px-6 py-5">
                        <p class="text-sm text-slate-500" th:text="${m.edad} + ' años'"></p>
                    </td>

                    <td class="px-6 py-5">
                        <p class="text-sm text-slate-400 italic font-medium" th:text="${m.usuario != null ? m.usuario.nombre : 'Sin asignar'}"></p>
                    </td>

                    <td class="px-6 py-5">
                        <div class="flex justify-center gap-3">
                            <a th:href="@{'/editar-mascota/' + ${m.id}}"
                               class="w-9 h-9 flex items-center justify-center text-amber-500 bg-amber-50 hover:bg-amber-500 hover:text-white rounded-xl transition-all shadow-sm">
                                <i class="fas fa-edit text-xs"></i>
                            </a>
                            <a th:href="@{'/eliminar-mascota/' + ${m.id}}"
                               onclick="return confirm('¿Confirmar eliminación?')"
                               class="w-9 h-9 flex items-center justify-center text-rose-500 bg-rose-50 hover:bg-rose-500 hover:text-white rounded-xl transition-all shadow-sm">
                                <i class="fas fa-trash-alt text-xs"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr th:if="${#lists.isEmpty(mascotas)}">
                    <td colspan="6" class="px-6 py-20 text-center">
                        <i class="fas fa-folder-open text-4xl text-slate-100 mb-4 block"></i>
                        <p class="text-slate-400 uppercase tracking-widest text-[10px] font-bold">No hay registros disponibles</p>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <footer class="bg-slate-50/80 border-t border-slate-100 px-10 py-8">
        <div class="flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="text-left">
                <p class="text-slate-800 text-xs font-bold tracking-tighter uppercase">VetFriendly</p>
                <p class="text-slate-400 text-[10px] uppercase tracking-widest">&copy; 2025 Gestion de Datos</p>
            </div>
            <div class="flex gap-6 text-slate-300">
                <i class="fab fa-facebook-f text-sm"></i>
                <i class="fab fa-instagram text-sm"></i>
                <i class="fab fa-whatsapp text-sm"></i>
            </div>
            <div class="hidden md:block">
            </div>
        </div>
    </footer>
</div>

</body>
</html>